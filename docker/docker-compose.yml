services:
  ubuntu:
    container_name: autotools-ubuntu
    build:
      context: ..
      dockerfile: docker/Dockerfile
      target: ubuntu
    volumes:
      - ../:/app
      - ../docker/data:/data
    environment:
      - PYTHONUNBUFFERED=1
      - PLATFORM=Ubuntu
      - VERBOSE=1
      - CI=${CI:-}
      - GITHUB_ACTIONS=${GITHUB_ACTIONS:-}
      - GITLAB_CI=${GITLAB_CI:-}
      - JENKINS_URL=${JENKINS_URL:-}
      - TRAVIS=${TRAVIS:-}
      - CIRCLECI=${CIRCLECI:-}
      - APPVEYOR=${APPVEYOR:-}
      - BUILDKITE=${BUILDKITE:-}
      - TEAMCITY=${TEAMCITY:-}

  macos:
    container_name: autotools-macos
    build:
      context: ..
      dockerfile: docker/Dockerfile
      target: macos
    volumes:
      - ../:/app
      - ../docker/data:/data
    environment:
      - PYTHONUNBUFFERED=1
      - PLATFORM=macOS
      - VERBOSE=1
      - CI=${CI:-}
      - GITHUB_ACTIONS=${GITHUB_ACTIONS:-}
      - GITLAB_CI=${GITLAB_CI:-}
      - JENKINS_URL=${JENKINS_URL:-}
      - TRAVIS=${TRAVIS:-}
      - CIRCLECI=${CIRCLECI:-}
      - APPVEYOR=${APPVEYOR:-}
      - BUILDKITE=${BUILDKITE:-}
      - TEAMCITY=${TEAMCITY:-}

  windows:
    container_name: autotools-windows
    build:
      context: ..
      dockerfile: docker/Dockerfile
      target: windows
    volumes:
      - ../:/app
      - ../docker/data:/data
    environment:
      - PYTHONUNBUFFERED=1
      - PLATFORM=Windows
      - VERBOSE=1
      - CI=${CI:-}
      - GITHUB_ACTIONS=${GITHUB_ACTIONS:-}
      - GITLAB_CI=${GITLAB_CI:-}
      - JENKINS_URL=${JENKINS_URL:-}
      - TRAVIS=${TRAVIS:-}
      - CIRCLECI=${CIRCLECI:-}
      - APPVEYOR=${APPVEYOR:-}
      - BUILDKITE=${BUILDKITE:-}
      - TEAMCITY=${TEAMCITY:-}
